# Mysql体系结构

历经这么多年，mysql的体系结构依然分为这些个部分，下图所示的是最新的8.0结构的mysql体系结构。

![MySQL architecture diagram showing connectors, interfaces, pluggable storage engines, the file system with files and logs.](https://www.shiyitopo.tech/uPic/mysql-architecture.png)

mysql是可拔插的存储引擎架构，这一整套架构将`应用程序员` 和`熟悉底层的DBA`给区别开来，提供了一致的应用模型以及api。

这个架构可以分为下面这四大部分:

1. 网络连接层
2. 数据库服务层
3. 存储引擎层
4. 系统文件层

##   网络连接层

网络连接层位于整个mysql体系结构的最上层，用于接入客户端的请求。

提供与mysql服务器建立连接，几乎支持所有的服务端语言: Java、Python、PHP等，这种语言都是通过这一层和mysql进行交互

## 数据库服务层

数据库服务层是整个数据库运转的核心，包括了NoSQL、SQL接口、解析器、优化器、缓存等部分

### NoSQL

随着互联网的不断发展，传统的sql已经无法满足业务需求，NoSQL中间件百花齐放，mysql与时俱进的加入了NoSQL的处理

### SQL接口

负责接受客户端发送过来的各种SQL指令

### 解析器

对传入进来的sql解析成一课解析树，根据mysql中的一些规则对生成的解析树进行进一步的语法验证

### 优化器

如果通过了解析器的语法检查，优化器就会将解析树转化成执行计划，然后与存储引擎进行交互

### 缓存

提供了一系列的缓存，表缓存，记录缓存，数据缓存等。

进一步提高mysql的查询性能，如果命中了缓存，则直接返回缓存中的结果信息。

## 存储引擎层

存储引擎是数据存储的底层的物理实现，是基于表的，可以每一个表的存储引擎都不一致。

其中，innodb 和 MyISAM 存储引擎，是面试中的高频考点，也是最常用的存储引擎。

## 系统文件层

系统文件层主要包括mysql中存储数据的底层文件，与上层的存储引擎进行交互，是文件的物理存储层。

是可以正儿八经在系统中找到对应的文件的，其存储的文件主要有: 日志文件、数据文件、配置文件、pid文件和soket文件等



在mysql被oracle收购之后，除了在存储引擎层进行了改进以及优化，其他层都没有什么大的变动。

所以，研究mysql其实就是研究innodb的存储引擎。