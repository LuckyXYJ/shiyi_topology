# JVM的对象分配规则

+ 对象优先被分配在Eden区，在Eden区内存空间不足的时候会进行一次Minor GC，由于Java对象大多数都是朝生夕死的因此在Minor GC过之后会清除掉大部分的内存区域，此次收集之后未被清除的对象会被复制到Survivor区
+ 大对象直接会进入到老年代，避免大对象在Eden区和Survivor区进行频繁的内存拷贝。

- 长期存活的对象进入老年代。虚拟机会为每个对象打上年龄的标记，在Minor GC之后存活下来的对象年龄会+1，达到阈值会被移动到老年代区。

+ 动态对象年龄判定。如果Survivor区中年龄相同的对象大小大于Survivor区的一半，虚拟机则会把大于或者等于这个年龄的对象提前移动到老年代中。
+ 空间分配担保。由于Minor GC会将整个新生代的对象移动到老年代中，所以在进行GC之前会对老年代的内存空间进行检查，如果老年代中连续的内存空间大于整个新生代的空间，则能够执行一次Minor GC。如果不是，则需要进一步进行检查，检查老年代的连续空间是否大于`历次`晋升到老年代对象的平均大小，如果是则会冒险进行一次MinorGC，如果不是老年代会先进行Full GC
+ 